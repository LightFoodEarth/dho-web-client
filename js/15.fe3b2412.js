(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([[15],{"0c92":function(e,t,o){},1259:function(e,t,o){"use strict";o.r(t);var r=function(){var e=this,t=e.$createElement,o=e._self._c||t;return o("q-page",{staticClass:"flex flex-center column"},[e.$q.platform.is.desktop?o("div",{staticClass:"world-bg",staticStyle:{background:"url('bg/world.svg')"}}):e._e(),o("transition",{attrs:{appear:"","enter-active-class":"animated fadeIn","leave-active-class":"animated fadeOut"}},[o("div",[o("div",{staticClass:"title"},[o("span",[e._v("Hypha")]),o("strong",[e._v("EARTH")])]),o("div",{staticClass:"subtitle q-mb-lg"},[e._v("Create the next chapter in Earth's history")])])]),o("div",{staticClass:"content q-pa-md row q-col-gutter-md"},[o("div",{staticClass:"col-xs-12 col-md-3"},[o("div",{staticClass:"content-title"},[e._v("Register Account")]),o("div",{staticClass:"content-text1"},[e._v("Please use the guided form to create a new SEEDS account and membership registration. Please note that you can use your existing SEEDS account (e.g. from the Passport) to login to the DHO (use the link below to sign in).")]),o("div",{staticClass:"content-text3"},[e._v("Already have an account? "),o("router-link",{attrs:{to:"/login"}},[e._v("Login here.")]),o("br"),e._v("Just visiting? "),o("router-link",{attrs:{to:"/dashboard"}},[e._v("Continue as guest.")])],1)]),o("div",{staticClass:"col-xs-12 col-md-9"},[o("q-stepper",{ref:"stepper",staticClass:"bg-none",attrs:{horizontal:"",animated:"",contracted:e.$q.screen.lt.sm},scopedSlots:e._u([{key:"navigation",fn:function(){return[o("q-stepper-navigation",{attrs:{align:"right"}},[o("q-btn",{attrs:{label:"finish"===e.step?"Done":"Next",color:"secondary",unelevated:"",disable:"keys"===e.step&&!e.formStep2.copy,loading:e.submitting},on:{click:e.next}})],1)]},proxy:!0}]),model:{value:e.step,callback:function(t){e.step=t},expression:"step"}},[o("q-step",{attrs:{name:"phoneNumber",title:"Account information",done:e.stepIndex[e.step]>1}},[o("q-input",{ref:"account",staticClass:"q-mb-lg",attrs:{color:"accent","bg-color":"white",label:"Account name",hint:"12 characters, alphanumeric a-z, 1-5",outlined:"",maxlength:"12",rules:[e.rules.required,e.rules.accountFormatBasic,e.rules.accountLength,e.rules.isAccountAvailable],"lazy-rules":"",debounce:200},on:{blur:function(t){e.formStep1.account=(e.formStep1.account||"").toLowerCase()}},model:{value:e.formStep1.account,callback:function(t){e.$set(e.formStep1,"account",t)},expression:"formStep1.account"}}),o("q-input",{ref:"reason",staticClass:"q-mb-lg",attrs:{color:"accent","bg-color":"white",label:"Reason for membership",counter:"",outlined:"",maxlength:"140",rules:[e.rules.required],"lazy-rules":""},model:{value:e.formStep1.reason,callback:function(t){e.$set(e.formStep1,"reason",t)},expression:"formStep1.reason"}}),o("div",{staticClass:"row flex phone-input"},[o("q-select",{ref:"countryCode",style:{width:"40%"},attrs:{options:e.phoneOptions,"option-value":function(e){return e},"option-label":function(e){return e.name+" ("+e.dialCode+")"},"display-value":e.formStep1.countryCode&&e.formStep1.countryCode.dialCode,label:"Country","bg-color":"white","emit-value":"","map-options":"",outlined:"",clearable:"",rules:[e.rules.required],"lazy-rules":"","use-input":"","hide-selected":"","fill-input":""},on:{filter:e.filterCountry},model:{value:e.formStep1.countryCode,callback:function(t){e.$set(e.formStep1,"countryCode",t)},expression:"formStep1.countryCode"}}),o("q-input",{ref:"smsNumber",style:{width:"60%"},attrs:{color:"accent","bg-color":"white",label:"Phone number",outlined:"",rules:[e.rules.required,e.isPhoneValid],"lazy-rules":""},model:{value:e.formStep1.smsNumber,callback:function(t){e.$set(e.formStep1,"smsNumber",t)},expression:"formStep1.smsNumber"}})],1),e.error?o("div",{staticClass:"text-red bg-white"},[e._v(e._s(e.error))]):e._e()],1),o("q-step",{attrs:{name:"keys",title:"Keys",done:e.stepIndex[e.step]>2}},[o("q-input",{ref:"code",staticClass:"full-width",attrs:{"bg-color":"white",outlined:"",label:"Verification code",rules:[e.rules.required],"lazy-rules":"",error:!!e.error,"error-message":e.error},model:{value:e.formStep2.code,callback:function(t){e.$set(e.formStep2,"code",t)},expression:"formStep2.code"}}),o("q-input",{ref:"publicKey",staticClass:"q-mb-lg",attrs:{label:"Public Key","bg-color":"white",outlined:"",readonly:"",loading:e.generating},on:{click:function(t){return e.$refs["publicKey"].select()}},scopedSlots:e._u([{key:"after",fn:function(){return[o("q-btn",{attrs:{round:"",color:"primary",icon:"fas fa-clipboard",size:"sm"},on:{click:function(t){return e.onCopyToClipboard(e.formStep2.publicKey)}}})]},proxy:!0}]),model:{value:e.formStep2.publicKey,callback:function(t){e.$set(e.formStep2,"publicKey",t)},expression:"formStep2.publicKey"}}),o("q-input",{ref:"privateKey",attrs:{label:"Private Key","bg-color":"white",outlined:"",readonly:"",loading:e.generating},on:{click:function(t){return e.$refs["privateKey"].select()}},scopedSlots:e._u([{key:"after",fn:function(){return[o("q-btn",{attrs:{round:"",color:"primary",icon:"fas fa-clipboard",size:"sm"},on:{click:function(t){return e.onCopyToClipboard(e.formStep2.privateKey)}}})]},proxy:!0}]),model:{value:e.formStep2.privateKey,callback:function(t){e.$set(e.formStep2,"privateKey",t)},expression:"formStep2.privateKey"}}),o("q-checkbox",{staticClass:"full-width",attrs:{label:"I have copied my keys somewhere safe"},model:{value:e.formStep2.copy,callback:function(t){e.$set(e.formStep2,"copy",t)},expression:"formStep2.copy"}})],1),o("q-step",{staticClass:"text-center",attrs:{name:"finish",title:"Welcome",done:3===e.stepIndex[e.step]}},[o("div",{staticClass:"text-subtitle1"},[e._v("Congratulations "),o("strong",[e._v(e._s(e.formStep1.account)+"!")])]),o("div",{staticClass:"text-subtitle2"},[e._v("Welcome to Hypha DAO, you can now log in using your private key")])])],1)],1)])],1)},s=[],n=(o("c975"),o("e6cf"),o("ded3")),i=o.n(n),a=o("2f62"),l=o("6abe"),c=o("6cf7"),u=o("9008"),p=o("041d"),d={name:"page-register",mixins:[u["a"],p["a"]],data(){return{step:"phoneNumber",stepIndex:{phoneNumber:1,keys:2,finish:3},phoneOptions:[],formStep1:{account:null,reason:null,smsNumber:null,countryCode:null,internationalPhone:null},formStep2:{code:null,copy:!1,privateKey:null,publicKey:null},error:null,generating:!1,submitting:!1}},async mounted(){this.phoneOptions=this.countriesPhoneCode;const e=await Object(c["b"])();this.formStep2.privateKey=e.privateKey,this.formStep2.publicKey=e.publicKey},methods:i()(i()({},Object(a["b"])("accounts",["sendOTP","verifyOTP"])),{},{filterCountry(e,t){t((()=>{this.phoneOptions=this.countriesPhoneCode.filter((t=>t.name.toLowerCase().indexOf(e.toLowerCase())>-1))}))},async onSendOTP(){if(await this.resetValidation(this.formStep1),this.error=null,!await this.validate(this.formStep1))return;const e=l["PhoneNumberUtil"].getInstance(),t=e.parseAndKeepRawInput(`${this.formStep1.countryCode.dialCode}${this.formStep1.smsNumber}`,this.formStep1.countryCode.code);this.formStep1.internationalPhone=e.format(t,l["PhoneNumberFormat"].INTERNATIONAL),this.submitting=!0;const{success:o,error:r}=await this.sendOTP(this.formStep1);o?this.step="keys":this.error=r,this.submitting=!1},async onVerifyOTP(){if(await this.resetValidation(this.formStep2),this.error=null,!await this.validate(this.formStep2))return;this.submitting=!0;const{success:e,error:t}=await this.verifyOTP({smsOtp:this.formStep2.code,smsNumber:this.formStep1.internationalPhone,telosAccount:this.formStep1.account,publicKey:this.formStep2.publicKey,privateKey:this.formStep2.privateKey,reason:this.formStep1.reason});e?this.step="finish":this.error=t,this.submitting=!1},isPhoneValid(){try{const e=l["PhoneNumberUtil"].getInstance(),t=e.parseAndKeepRawInput(`${this.formStep1.countryCode.dialCode}${this.formStep1.smsNumber}`,this.formStep1.countryCode.code);return e.isValidNumber(t)||"Please type a valid phone"}catch(e){return"Please type a valid phone"}},onCopyToClipboard(e){Object(c["a"])(e)},async next(){"phoneNumber"===this.step?await this.onSendOTP():"keys"===this.step?await this.onVerifyOTP():"finish"===this.step&&"/dashboard"!==this.$router.currentRoute.path&&await this.$router.push({path:"/dashboard"})}})},m=d,f=(o("e1fe"),o("2877")),h=o("9989"),b=o("f531"),y=o("87fe"),v=o("27f9"),S=o("ddd8"),g=o("9c40"),C=o("8f8e"),w=o("b19c"),x=o("eebe"),k=o.n(x),q=Object(f["a"])(m,r,s,!1,null,"0fb22d97",null);t["default"]=q.exports;k()(q,"components",{QPage:h["a"],QStepper:b["a"],QStep:y["a"],QInput:v["a"],QSelect:S["a"],QBtn:g["a"],QCheckbox:C["a"],QStepperNavigation:w["a"]})},e1fe:function(e,t,o){"use strict";var r=o("0c92"),s=o.n(r);s.a}}]);