(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([[6],{"0acd":function(t,e,s){"use strict";var a=s("1d84"),i=s.n(a);i.a},"1d84":function(t,e,s){},"25d9f":function(t,e,s){"use strict";var a=s("c28d"),i=s.n(a);i.a},"6b20":function(t,e,s){},c28d:function(t,e,s){},c9bf:function(t,e,s){"use strict";var a=s("6b20"),i=s.n(a);i.a},fa6d:function(t,e,s){"use strict";s.r(e);var a=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("q-page",{staticClass:"q-pa-lg",attrs:{"style-fn":t.breadcrumbsTweak}},[s("div",{staticClass:"documents-list"},["badge"===t.$route.params.type?s("badge-list"):t._e(),"role"===t.$route.params.type?s("role-list"):t._e(),"assignment"===t.$route.params.type?s("assignment-list"):t._e(),"payout"===t.$route.params.type?s("payout-list"):t._e()],1)])},i=[],n=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("q-infinite-scroll",{attrs:{disable:t.loaded,offset:250},on:{load:t.onLoad},scopedSlots:t._u([{key:"loading",fn:function(){return[s("div",{staticClass:"row justify-center q-my-md"},[s("q-spinner-dots",{attrs:{color:"primary",size:"40px"}})],1)]},proxy:!0}])},[s("div",{staticClass:"row"},t._l(t.badges,(function(t){return s("badge-card",{key:t.hash,attrs:{badge:t}})})),1)])},o=[],r=(s("e6cf"),s("ded3")),l=s.n(r),c=s("2f62"),d=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("q-card",{staticClass:"badge column"},[s("top-right-icon",{attrs:{type:"badge"}}),s("q-card-section",{staticClass:"text-center",on:{click:t.showCardFullContent}},[t.icon&&""!==t.icon?s("q-img",{staticClass:"avatar",attrs:{src:t.icon}}):s("q-avatar",{staticClass:"avatar",attrs:{size:"150px",color:"primary","text-color":"white"}},[t._v("NA")])],1),s("q-card-section",{on:{click:t.showCardFullContent}},[s("div",{staticClass:"title"},[t._v(t._s(t.title))]),s("div",{staticClass:"sponsor"},[t._v("Sponsored by "+t._s(t.profile&&t.profile.publicData&&t.profile.publicData.name||t.proposer))])]),s("q-card-actions",{staticClass:"q-pa-lg"},[s("div",{staticClass:"flex justify-around full-width"},[s("q-btn",{attrs:{disable:!t.isAuthenticated,label:"Apply",color:"hire",rounded:"",dense:"",unelevated:""},on:{click:t.openApplicationForm}})],1)])],1)},u=[],h=s("5d0f"),p=s("386c"),m={name:"badge-card",mixins:[p["a"]],props:{badge:{type:Object,required:!0}},components:{TopRightIcon:h["a"]},data(){return{profile:null}},methods:l()(l()(l()({},Object(c["b"])("profiles",["getPublicProfile"])),Object(c["d"])("layout",["setShowRightSidebar","setRightSidebarType"])),{},{showCardFullContent(){this.setShowRightSidebar(!0),this.setRightSidebarType({type:"badgeView",data:this.badge})},openApplicationForm(){this.setShowRightSidebar(!0),this.setRightSidebarType({type:"badgeAssignmentForm",data:{type:"new",badge:{hash:this.badge.hash,title:this.title,seeds:this.seeds,hypha:this.hypha,hvoice:this.hvoice,husd:this.husd}}})}}),computed:l()(l()({},Object(c["c"])("accounts",["isAuthenticated","account"])),{},{details(){const t=this.badge.content_groups.find((t=>t.contents.some((t=>"content_group_label"===t.label&&"details"===t.value))));return t&&t.contents.length?t.contents:null},title(){return this.getValue(this.badge,"details","title")},seeds(){return this.getValue(this.badge,"details","seeds_coefficient_x10000")/100},hypha(){return this.getValue(this.badge,"details","hypha_coefficient_x10000")/100},hvoice(){return this.getValue(this.badge,"details","hvoice_coefficient_x10000")/100},husd(){return this.getValue(this.badge,"details","husd_coefficient_x10000")/100},icon(){return this.getValue(this.badge,"details","icon")},proposer(){return this.badge.creator}}),watch:{proposer:{immediate:!0,async handler(t){this.profile=t&&await this.getPublicProfile(t)}}}},g=m,b=(s("25d9f"),s("2877")),f=s("f09f"),y=s("a370"),v=s("068f"),w=s("cb32"),C=s("4b7e"),_=s("9c40"),q=s("eebe"),x=s.n(q),P=Object(b["a"])(g,d,u,!1,null,"29a3e650",null),S=P.exports;x()(P,"components",{QCard:f["a"],QCardSection:y["a"],QImg:v["a"],QAvatar:w["a"],QCardActions:C["a"],QBtn:_["a"]});var j={name:"page-badge-list",components:{BadgeCard:S},data(){return{pagination:{first:10,offset:0},loaded:!1}},async beforeMount(){this.clearBadges(),this.setBreadcrumbs([{title:"Badges"}])},computed:l()({},Object(c["c"])("badges",["badges"])),methods:l()(l()(l()(l()({},Object(c["d"])("layout",["setBreadcrumbs"])),Object(c["d"])("badges",["clearBadges"])),Object(c["b"])("badges",["loadBadges"])),{},{async onLoad(t,e){this.loaded=await this.loadBadges(this.pagination),this.loaded||(this.pagination.offset+=this.pagination.first),e()}})},O=j,k=s("ef35"),D=s("8380"),A=Object(b["a"])(O,n,o,!1,null,null,null),Q=A.exports;x()(A,"components",{QInfiniteScroll:k["a"],QSpinnerDots:D["a"]});var V=s("a910"),I=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("q-infinite-scroll",{attrs:{disable:t.loaded,offset:250},on:{load:t.onLoad},scopedSlots:t._u([{key:"loading",fn:function(){return[s("div",{staticClass:"row justify-center q-my-md"},[s("q-spinner-dots",{attrs:{color:"primary",size:"40px"}})],1)]},proxy:!0}])},[s("div",{staticClass:"row"},t._l(t.assignments,(function(e){return s("assignment-card",{key:e.hash,attrs:{assignment:e,history:t.history},on:{claimed:t.reload}})})),1),s("q-page-sticky",{style:{"z-index":100},attrs:{position:"right",offset:[18,0]}},[t.history?t._e():s("q-btn",{attrs:{fab:"",icon:"fas fa-history",color:"accent",size:"lg"},on:{click:function(e){t.history=!t.history}}},[s("q-tooltip",[t._v("History")])],1),t.history?s("q-btn",{attrs:{fab:"",icon:"fas fa-eye",color:"accent",size:"lg"},on:{click:function(e){t.history=!t.history}}},[s("q-tooltip",[t._v("Active")])],1):t._e()],1)],1)},$=[],B=function(){var t=this,e=t.$createElement,s=t._self._c||e;return t.isFiltered&&(t.isExpired&&t.history||!t.isExpired&&!t.history)?s("q-card",{staticClass:"assignment"},[t.isExpired?s("div",{staticClass:"ribbon"},[s("span",{staticClass:"text-white bg-red"},[t._v("EXPIRED")])]):t._e(),s("q-btn",{staticClass:"card-menu",staticStyle:{width:"40px",height:"40px",margin:"4px"},attrs:{icon:"fas fa-ellipsis-v",color:"grey",flat:"",dense:"",round:"","no-caps":"",ripple:!1}},[s("q-menu",[s("q-list",{attrs:{dense:""}},[t.account===t.assignee?s("q-item",{directives:[{name:"close-popup",rawName:"v-close-popup"}],attrs:{clickable:""},on:{click:t.editObject}},[s("q-item-section",{staticStyle:{"max-width":"20px"}},[s("q-icon",{attrs:{name:"fas fa-pencil-alt",size:"14px"}})],1),s("q-item-section",[t._v("Edit")])],1):t._e(),t.account!==t.assignee?s("q-item",{attrs:{clickable:""}},[s("q-popup-proxy",[s("div",{staticClass:"confirm column q-pa-sm"},[t._v("Are you sure you want to suspend this assignment?"),s("div",{staticClass:"row flex justify-between q-mt-sm"},[s("q-btn",{directives:[{name:"close-popup",rawName:"v-close-popup",value:-1,expression:"-1"}],attrs:{color:"primary",label:"No",dense:"",flat:""}}),s("q-btn",{directives:[{name:"close-popup",rawName:"v-close-popup",value:-1,expression:"-1"}],attrs:{color:"primary",label:"Yes",dense:""},on:{click:t.onSuspendAssignment}})],1)])]),s("q-item-section",{staticStyle:{"max-width":"20px"}},[s("q-icon",{attrs:{name:"fas fa-hand-paper",size:"14px"}})],1),s("q-item-section",[t._v("Suspend")])],1):t._e(),t.account===t.assignee?s("q-item",{attrs:{clickable:""}},[s("q-popup-proxy",[s("div",{staticClass:"confirm column q-pa-sm"},[t._v("Are you sure you want to withdraw from this assignment?"),s("q-input",{attrs:{label:"Notes"},model:{value:t.withdrawNotes,callback:function(e){t.withdrawNotes=e},expression:"withdrawNotes"}}),s("div",{staticClass:"row flex justify-between q-mt-sm"},[s("q-btn",{directives:[{name:"close-popup",rawName:"v-close-popup",value:-1,expression:"-1"}],attrs:{color:"primary",label:"No",dense:"",flat:""}}),s("q-btn",{directives:[{name:"close-popup",rawName:"v-close-popup",value:-1,expression:"-1"}],attrs:{color:"primary",label:"Yes",dense:""},on:{click:t.onWithdrawFromAssignment}})],1)],1)]),s("q-item-section",{staticStyle:{"max-width":"20px"}},[s("q-icon",{attrs:{name:"fas fa-times",size:"14px"}})],1),s("q-item-section",[t._v("Withdraw")])],1):t._e()],1)],1)],1),s("top-right-icon",{attrs:{type:"assignment",menu:!0}}),s("q-card-section",{staticClass:"text-center q-pb-sm relative-position"},[t.assignee?s("badge-assignments-stack",{staticClass:"badge-stack",attrs:{username:t.assignee}}):t._e(),t.profile&&t.profile.publicData.avatar?s("q-img",{staticClass:"avatar",attrs:{src:t.profile.publicData.avatar},on:{click:function(e){return t.$router.push({path:"/@"+t.assignee})}}}):s("q-avatar",{staticClass:"avatar",attrs:{size:"150px",color:"accent","text-color":"white"},on:{click:function(e){return t.$router.push({path:"/@"+t.assignee})}}},[t._v(t._s(t.assignee.slice(0,2).toUpperCase()))]),t.annualSalary?s("div",{staticClass:"salary-bucket bg-proposal"},[t._v(t._s(t.getSalaryBucket(parseInt(t.annualSalary))))]):t._e()],1),s("q-card-section",[s("div",{staticClass:"type",on:{click:t.showCardFullContent}},[t._v(t._s(t.profile&&t.profile.publicData&&t.profile.publicData.name||t.assignee))]),s("div",{staticClass:"title",on:{click:t.showCardFullContent}},[t._v(t._s(t.title))]),t.startPhase?s("div",{staticClass:"date"},[t._v("Started the "+t._s(new Date(t.startPhase.startDate).toLocaleDateString()))]):t._e()]),t.account===t.assignee?s("q-card-actions",{staticClass:"q-pa-lg actions",attrs:{align:"center"}},[s("div",{staticClass:"flex justify-around full-width"},[t.showClaim?s("q-btn",{attrs:{label:"Claim",color:"assignment",loading:t.claiming,rounded:"",dense:"",unelevated:""},on:{click:t.onClaimAssignmentPayment}}):t._e(),t.isExpired&&t.account===t.assignee?s("q-btn",{attrs:{label:"Extend",color:"orange",rounded:"",dense:"",unelevated:""},on:{click:t.editObject}}):t._e()],1),""===t.countdown||t.isExpired?t._e():s("div",{staticClass:"countdown q-mt-sm"},[s("q-icon",{staticClass:"q-mr-sm",attrs:{name:"fas fa-exclamation-triangle",size:"sm"}}),t._v("Next claim in "+t._s(t.countdown))],1)]):t._e()],1):t._e()},R=[],F=(s("fb6a"),s("ba75")),E=s("7444"),N={name:"assignment-card",mixins:[p["a"],E["a"]],components:{TopRightIcon:h["a"],BadgeAssignmentsStack:F["a"]},props:{assignment:{type:Object,required:!0},history:{type:Boolean,required:!1}},data(){return{profile:null,role:null,showClaim:!1,claiming:!1,currentPeriod:null,timeout:null,countdown:"",withdrawNotes:null}},methods:l()(l()(l()(l()(l()({},Object(c["d"])("layout",["setShowRightSidebar","setRightSidebarType"])),Object(c["b"])("assignments",["claimAssignmentPayment","suspendAssignment","withdrawFromAssignment"])),Object(c["b"])("profiles",["getPublicProfile"])),Object(c["b"])("roles",["loadRole"])),{},{showCardFullContent(){this.setShowRightSidebar(!0),this.setRightSidebarType({type:"assignmentView",data:this.assignment})},async onSuspendAssignment(){await this.suspendAssignment(this.assignment.id),"/documents-proposals/assignment"!==this.$router.currentRoute.path&&await this.$router.push({path:"/documents-proposals/assignment"})},async onWithdrawFromAssignment(){await this.withdrawFromAssignment({id:this.assignment.id,notes:this.withdrawNotes}),"/documents-proposals/assignment"!==this.$router.currentRoute.path&&await this.$router.push({path:"/documents-proposals/assignment"})},async onClaimAssignmentPayment(){this.claiming=!0,await this.claimAssignmentPayment(this.assignment.hash),this.$emit("claimed"),this.claiming=!1},async verifyClaim(){const t=this.getPeriodIndexByDate(new Date(this.startPhase.startDate)),e=this.getPeriodIndexByDate(new Date);let s=!0;for(let a=t;a<=e-1;a+=1){const t=this.periods[a].startDate;this.assignment.claimed&&this.assignment.claimed.some((e=>{const s=new Date(Object(p["b"])(e,"details","start_time")+"Z");return t.getFullYear()===s.getFullYear()&&t.getMonth()===s.getMonth()&&t.getDate()===s.getDate()}))||(s=!1)}if(this.showClaim=!s,!this.showClaim&&!this.isExpired){if(this.currentPeriod=await this.getPeriodByDate(new Date),!this.currentPeriod)return;this.timeout=setInterval(this.updateCountdown,1e3)}},updateCountdown(){const t=new Date(this.currentPeriod.endDate+"Z").getTime(),e=t-Date.now();if(e>=0){const t=Math.floor(e/864e5),s=("0"+Math.floor(e%864e5/36e5)).slice(-2),a=("0"+Math.floor(e%36e5/6e4)).slice(-2),i=("0"+Math.floor(e%6e4/1e3)).slice(-2);this.countdown=t?t+"d ":"",this.countdown+=`${s}:${a}:${i}`}else this.countdown="",setTimeout(this.verifyClaim,2e3),clearInterval(this.timeout)},editObject(){this.setShowRightSidebar(!0),this.setRightSidebarType({type:"assignmentForm",data:{hash:this.assignment.hash,role:this.role,description:this.getValue(this.assignment,"details","description"),url:this.getValue(this.assignment,"details","url"),salaryCommitted:this.getValue(this.assignment,"details","time_share_x100"),salaryDeferred:this.getValue(this.assignment,"details","deferred_perc_x100"),startPeriod:this.startPhase,periodCount:this.periodCount,edit:!0}})}}),async mounted(){this.profile=await this.getPublicProfile(this.assignee),this.account===this.assignee&&await this.verifyClaim()},beforeDestroy(){this.timeout&&clearInterval(this.timeout)},computed:l()(l()(l()(l()({},Object(c["c"])("accounts",["account","isAuthenticated"])),Object(c["c"])("periods",["periods","getEndPeriod","getPeriodByDate","getPeriodIndexByDate","getMaxCurrentPeriodCount"])),Object(c["c"])("search",["search"])),{},{isFiltered(){return!this.search||(!(!this.role||!(this.getObjValue(this.role,"names","proposer").includes(this.search)||this.getObjValue(this.role,"strings","title").includes(this.search)||this.getObjValue(this.role,"strings","description").includes(this.search)))||(this.getObjValue(this.assignment,"names","assignee").includes(this.search)||this.getObjValue(this.assignment,"strings","description").includes(this.search)))},title(){return this.role&&this.getValue(this.role,"details","title")},url(){return this.getValue(this.assignment,"details","url")},assignee(){return this.getValue(this.assignment,"details","assignee")},roleId(){return this.getValue(this.assignment,"details","role")},startPhase(){const t=this.getValue(this.assignment,"details","start_period");return t?this.periods.find((e=>e.value===t)):null},periodCount(){return this.getValue(this.assignment,"details","period_count")},endPhase(){return this.startPhase&&this.getEndPeriod({value:this.startPhase.value,periodCount:this.periodCount})},isExpired(){return!this.startPhase||this.endPhase&&new Date(this.endPhase.endDate).getTime()<Date.now()},annualSalary(){return this.role&&this.getValue(this.role,"details","annual_usd_salary")}}),watch:{roleId:{immediate:!0,async handler(t){this.role=t&&await this.loadRole(t)}}}},T=N,z=(s("0acd"),s("4e73")),L=s("1c1c"),M=s("66e5"),U=s("4074"),Y=s("0016"),W=s("7cbe"),J=s("27f9"),Z=s("7f67"),H=Object(b["a"])(T,B,R,!1,null,"7367d3f0",null),X=H.exports;x()(H,"components",{QCard:f["a"],QBtn:_["a"],QMenu:z["a"],QList:L["a"],QItem:M["a"],QItemSection:U["a"],QIcon:Y["a"],QPopupProxy:W["a"],QInput:J["a"],QCardSection:y["a"],QImg:v["a"],QAvatar:w["a"],QCardActions:C["a"]}),x()(H,"directives",{ClosePopup:Z["a"]});var G={name:"page-assignment-list",components:{AssignmentCard:X},data(){return{pagination:{first:10,offset:0},loaded:!1,history:!1}},async beforeMount(){this.clearAssignments(),this.setBreadcrumbs([{title:"Assignments"}])},computed:l()({},Object(c["c"])("assignments",["assignments"])),methods:l()(l()(l()(l()({},Object(c["d"])("layout",["setBreadcrumbs"])),Object(c["d"])("assignments",["clearAssignments"])),Object(c["b"])("assignments",["loadAssignments","loadUserAssignments"])),{},{async onLoad(t,e){this.$route.params.user?this.loaded=await this.loadUserAssignments(l()(l()({},this.pagination),{},{user:this.$route.params.user})):this.loaded=await this.loadAssignments(this.pagination),this.loaded||(this.pagination.offset+=this.pagination.first),e()},async reload(){this.clearAssignments(),this.pagination={first:10,offset:0},this.loaded=!1}})},K=G,tt=s("de5e"),et=s("05c0"),st=Object(b["a"])(K,I,$,!1,null,null,null),at=st.exports;x()(st,"components",{QInfiniteScroll:k["a"],QSpinnerDots:D["a"],QPageSticky:tt["a"],QBtn:_["a"],QTooltip:et["a"]});var it=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("q-infinite-scroll",{attrs:{disable:t.loaded,offset:250},on:{load:t.onLoad},scopedSlots:t._u([{key:"loading",fn:function(){return[s("div",{staticClass:"row justify-center q-my-md"},[s("q-spinner-dots",{attrs:{color:"primary",size:"40px"}})],1)]},proxy:!0}])},[s("div",{staticClass:"row"},t._l(t.payouts,(function(t){return s("payout-card",{key:t.hash,attrs:{payout:t}})})),1)])},nt=[],ot=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("q-card",{staticClass:"payout column"},[t.url&&"null"!==t.url?s("div",{staticClass:"url"},[s("q-btn",{attrs:{icon:"fas fa-bookmark",flat:"",color:"payout",unelevated:"",dense:""},on:{click:function(){return t.openUrl(t.url)}}})],1):t._e(),s("top-right-icon",{attrs:{type:"payout"}}),s("q-card-section",{staticClass:"text-center",on:{click:t.showCardFullContent}},[t.profile&&t.profile.publicData&&t.profile.publicData.avatar?s("q-img",{staticClass:"avatar",attrs:{src:t.profile.publicData.avatar},on:{click:function(e){return t.$router.push({path:"/@"+t.recipient})}}}):t._e(),t.profile&&t.profile.publicData&&t.profile.publicData.avatar?t._e():s("q-avatar",{staticClass:"avatar",attrs:{size:"150px",color:"accent","text-color":"white"},on:{click:function(e){return t.$router.push({path:"/@"+t.recipient})}}},[t._v(t._s(t.recipient.slice(0,2).toUpperCase()))])],1),s("q-card-section",{staticClass:"middle-section",on:{click:t.showCardFullContent}},[s("div",{staticClass:"recipient"},[t._v(t._s(t.profile&&t.profile.publicData&&t.profile.publicData.name||t.recipient))]),s("div",{staticClass:"title"},[t._v(t._s(t.title))])]),s("q-card-section",{staticClass:"vote-section"},[t.ballotId?s("vote-yes-no-abstain",{attrs:{ballotId:t.ballotId,proposer:t.recipient,hash:this.payout.hash,"allow-details":!0}}):t._e()],1)],1)},rt=[],lt=s("bc31"),ct={name:"payout-payout-card",mixins:[p["a"]],props:{payout:{type:Object,required:!0}},components:{TopRightIcon:h["a"],VoteYesNoAbstain:lt["a"]},data(){return{profile:null}},methods:l()(l()(l()({},Object(c["b"])("profiles",["getPublicProfile"])),Object(c["d"])("layout",["setShowRightSidebar","setRightSidebarType"])),{},{showCardFullContent(){this.setShowRightSidebar(!0),this.setRightSidebarType({type:"payoutView",data:this.payout})}}),computed:l()(l()({},Object(c["c"])("accounts",["account"])),{},{title(){return this.getValue(this.payout,"details","title")},url(){return this.getValue(this.payout,"details","url")},recipient(){return this.getValue(this.payout,"details","recipient")},ballotId(){return this.getValue(this.payout,"system","ballot_id")}}),watch:{recipient:{immediate:!0,async handler(t){this.profile=t&&await this.getPublicProfile(t)}}}},dt=ct,ut=(s("c9bf"),Object(b["a"])(dt,ot,rt,!1,null,"f2321e24",null)),ht=ut.exports;x()(ut,"components",{QCard:f["a"],QBtn:_["a"],QCardSection:y["a"],QImg:v["a"],QAvatar:w["a"]});var pt={name:"page-payout-list",components:{PayoutCard:ht},data(){return{pagination:{first:10,offset:0},loaded:!1}},async beforeMount(){this.clearPayouts(),this.setBreadcrumbs([{title:"Contributions"}])},computed:l()({},Object(c["c"])("payouts",["payouts"])),methods:l()(l()(l()(l()({},Object(c["d"])("layout",["setBreadcrumbs"])),Object(c["d"])("payouts",["clearPayouts"])),Object(c["b"])("payouts",["loadPayouts","loadUserPayouts"])),{},{async onLoad(t,e){this.$route.params.user?this.loaded=await this.loadUserPayouts(l()(l()({},this.pagination),{},{user:this.$route.params.user})):this.loaded=await this.loadPayouts(this.pagination),this.loaded||(this.pagination.offset+=this.pagination.first),e()}})},mt=pt,gt=Object(b["a"])(mt,it,nt,!1,null,null,null),bt=gt.exports;x()(gt,"components",{QInfiniteScroll:k["a"],QSpinnerDots:D["a"]});var ft={name:"list",components:{BadgeList:Q,RoleList:V["default"],AssignmentList:at,PayoutList:bt}},yt=ft,vt=s("9989"),wt=Object(b["a"])(yt,a,i,!1,null,"28a3b31e",null);e["default"]=wt.exports;x()(wt,"components",{QPage:vt["a"]})}}]);